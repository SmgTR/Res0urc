(this["webpackJsonpchrome-extension"]=this["webpackJsonpchrome-extension"]||[]).push([[0],{26:function(e,t,c){},27:function(e,t,c){},48:function(e,t,c){"use strict";c.r(t);var r=c(1),n=c.n(r),a=c(21),s=c.n(a),o=(c(26),c(5)),i=(c(27),c(4)),l=c.n(i),u=c(7),j=Object(r.createContext)(),d=c(2),p="GET_USER",b="SET_MSG",h="CLEAR_MSG",O="GET_POPULAR",m="GET_MY_RES",f="SET_CURRENT",x="CLEAR_CURRENT",g=function(e,t){switch(t.type){case p:return Object(d.a)(Object(d.a)({},e),{},{user:t.payload});case b:return Object(d.a)(Object(d.a)({},e),{},{setMsg:{show:!0,msg:t.payload}});case h:return Object(d.a)(Object(d.a)({},e),{},{setMsg:{show:!1,msg:""}})}},v=c(6),k=c.n(v),_=function(e){e?k.a.defaults.headers.common.Authorization="Bearer ".concat(e):delete k.a.defaults.headers.common.Authorization},w=c(0),y=function(e){var t=Object(r.useReducer)(g,{user:{},setMsg:{show:!1,msg:""}}),c=Object(o.a)(t,2),n=c[0],a=c[1],s=function(e){a({type:b,payload:e}),setTimeout((function(){i()}),5e3)},i=function(){a({type:h})},d=function(){var e=Object(u.a)(l.a.mark((function e(t){var c,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c={email:t.email,password:t.password},e.next=4,k.a.post("https://res0urc.herokuapp.com/api/v1/users/login",c);case 4:r=e.sent,n=r.data.token,localStorage.setItem("token",n),window.location.reload(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),s(e.t0.response.data.message);case 12:case"end":return e.stop()}var n}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _(localStorage.token),e.prev=1,e.next=4,k.a.get("https://res0urc.herokuapp.com/api/v1/users/me");case 4:t=e.sent,a({type:p,payload:t.data.data.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();return Object(w.jsx)(j.Provider,{value:{user:n.user,setMsg:n.setMsg,loginUser:d,logout:function(){document.cookie="jwt=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",localStorage.clear(),window.location.reload()},getUser:O,msgHandler:s},children:e.children})},N=c(10),C=function(e){var t=e.label[0].toUpperCase()+e.label.slice(1);return Object(w.jsxs)(r.Fragment,{children:[Object(w.jsx)("label",{htmlFor:e.label,children:t}),Object(w.jsx)("input",Object(d.a)(Object(d.a)({className:"input"},e.input),{},{onChange:e.onChange}))]})},S=function(e){var t=e.text,c=e.stylingClass;return Object(w.jsx)("button",{className:"btn ".concat(c),children:t})},R=function(){var e=Object(r.useContext)(j),t=e.loginUser,c=e.setMsg,n=Object(r.useState)({email:"",password:""}),a=Object(o.a)(n,2),s=a[0],i=a[1],l=function(e){i(Object(d.a)(Object(d.a)({},s),{},Object(N.a)({},e.target.name,e.target.value)))};return Object(w.jsxs)(r.Fragment,{children:[Object(w.jsx)("p",{className:"error__msg",children:c.show?c.msg:""}),Object(w.jsx)("div",{className:"login input__default",children:Object(w.jsxs)("form",{className:"login__form ",onSubmit:function(e){t(s),e.preventDefault()},children:[Object(w.jsx)(C,{label:"email",input:{type:"text",placeholder:"Email",name:"email",required:!0},onChange:l}),Object(w.jsx)(C,{label:"password",input:{type:"password",placeholder:"Password",name:"password",required:!0},onChange:l}),Object(w.jsx)(S,{stylingClass:"button-y-animation",text:"Log in"})]})}),Object(w.jsxs)("h3",{className:"create__account",children:["No account yet? Please start"," ",Object(w.jsx)("a",{href:"https://res0urc.herokuapp.com/#",children:"here"})]})]})},E=function(e){var t=e.login;return Object(w.jsx)(r.Fragment,{children:Object(w.jsx)("h1",{onClick:t,className:"logo",children:"ResourC"})})},T=c.p+"static/media/default.4aff07be.png",P=function(){var e=Object(r.useContext)(j),t=e.user,c=e.getUser,n=e.logout;return Object(r.useEffect)((function(){c()}),[t,c]),Object(w.jsxs)("nav",{className:"nav__bar",children:[Object(w.jsx)(E,{}),Object(w.jsxs)("ul",{className:"userInfo",children:[Object(w.jsx)("li",{children:Object(w.jsx)("img",{src:t.photo||T,alt:"user avatar"})}),Object(w.jsx)("li",{children:t.name}),Object(w.jsx)("li",{className:"logout",onClick:function(){return n()},children:"Logout"})]})]})},M=Object(r.createContext)(),F=c.p+"static/media/defaultCover.1287f47e.png",L=function(e){var t=e.pop,c=t.name,n=t.description,a=t.id,s=t.links,o=t.cover,i=Object(r.useContext)(M).getOnePublic;return Object(w.jsxs)("li",{className:"card",id:a,onClick:function(e){var t=e.target.id||e.target.parentElement.id;i(t)},children:[Object(w.jsx)("img",{className:"card__cover",src:"../assets/defaultCover.png"===o?F:o,alt:"resourc cover"}),Object(w.jsx)("h1",{className:"card__title",children:c}),Object(w.jsx)("p",{className:"card__description",children:n}),Object(w.jsxs)("p",{className:"links-info",children:["Links: ",s.length,"/20"]})]})},U=function(e){var t=e.res;return Object(w.jsx)("ul",{className:"res__grid",children:t.map((function(e){return Object(w.jsx)(L,{pop:e,id:e.id},e.id)}))})},A=function(){var e=Object(r.useContext)(M),t=e.popular,c=e.getPopular;Object(r.useEffect)((function(){c()}),[]);var n=t.sort((function(e,t){return t.addedToBookmark.length-e.addedToBookmark.length}));return Object(w.jsxs)("div",{className:"popular container-pd",children:[Object(w.jsx)("h1",{className:"popular__title",children:"Recently popular:"}),Object(w.jsx)(U,{res:n})]})},B=function(){var e=Object(r.useContext)(M),t=e.userResources,c=e.getResources;return Object(r.useEffect)((function(){c(),console.log(t)}),[]),Object(w.jsxs)("div",{className:"user__lists container-pd",children:[Object(w.jsx)("h1",{children:"My resources:"}),0===t.length?Object(w.jsx)("h2",{className:"error__msg empty",children:"Nothing here yet, please visit our site and add your first collection!"}):"",Object(w.jsx)(U,{res:t})]})},G=function(){return Object(w.jsxs)("footer",{className:"footer",children:[Object(w.jsxs)("h4",{children:["Created by ",Object(w.jsx)("a",{href:"https://itutorials.pl/",children:"Tomasz Rusnak"})," 2021"]}),Object(w.jsxs)("h4",{children:["Visist our ",Object(w.jsx)("a",{href:"https://res0urc.herokuapp.com/",children:"Homepage"})]})]})},I=function(e){var t=e.link,c=e.removeSelect,n=e.addSelect,a=Object(r.useState)(!1),s=Object(o.a)(a,2),i=s[0],l=s[1],u=(t.description,t.title,t.image,t.type,t.url);t.video,t._id;return Object(w.jsxs)("div",{className:"link__item ".concat(i?"selected":""),onClick:function(e){if(window.navigator.platform.toLowerCase().includes("mac")?e.metaKey:e.altKey){l(!i);var t=e.target_id;i?c(t):n({id:t,url:u})}},children:[Object(w.jsx)("img",{src:t.image,alt:"user avatar"}),Object(w.jsx)("h1",{children:t.title}),Object(w.jsx)("p",{children:t.description}),Object(w.jsx)("div",{className:"link-url",children:Object(w.jsx)("a",{href:t.url,target:"_blank",rel:"noreferrer",className:"open__link",children:"Open"})})]})},z=function(e){var t=e.section,c=Object(r.useContext)(M).clearCurrent;return Object(w.jsxs)("div",{className:"flex back",children:[Object(w.jsx)("i",{className:"fas fa-arrow-left back__arrow",onClick:c}),Object(w.jsx)("h4",{className:"back__title",onClick:c,children:t})]})},H=function(){var e=Object(r.useContext)(M),t=e.current,c=(e.getOnePublic,e.openSelected),n=e.openAll,a=(e.selected,e.addSelect),s=e.removeSelect,o=t.name,i=t.author,l=t.links;return Object(w.jsxs)("div",{className:"links container-pd",children:[Object(w.jsx)(z,{section:"Home"}),Object(w.jsxs)("div",{className:"links__top",children:[Object(w.jsx)("h1",{className:"link__title",children:o}),Object(w.jsxs)("div",{className:"btn-container",children:[Object(w.jsx)("div",{className:"btn-rounded btn-open",onClick:n,children:"New Session"}),Object(w.jsx)("div",{className:"btn-rounded btn-open",onClick:c,children:"New Session from selected"})]})]}),Object(w.jsxs)("p",{className:"author__info",children:["Author: ",Object(w.jsx)("img",{src:i.photo?i.photo:T})," ",i.name]}),Object(w.jsx)("section",{className:"cards links-grid",children:l.map((function(e){return Object(w.jsx)(I,{link:e,addSelect:a,removeSelect:s},e._id)}))})]})},J=function(){var e=Object(r.useContext)(M).current;return Object(w.jsxs)(r.Fragment,{children:[Object(w.jsxs)("div",{className:"container",children:[Object(w.jsx)(P,{}),Object(w.jsx)("main",{children:e?Object(w.jsx)(H,{}):Object(w.jsxs)(r.Fragment,{children:[Object(w.jsx)(A,{}),Object(w.jsx)(B,{})]})})]}),Object(w.jsx)(G,{})]})},q=c(12),D=function(e,t){switch(t.type){case O:return Object(d.a)(Object(d.a)({},e),{},{popular:t.payload})}switch(t.type){case m:return Object(d.a)(Object(d.a)({},e),{},{userResources:t.payload})}switch(t.type){case x:return Object(d.a)(Object(d.a)({},e),{},{current:null})}switch(t.type){case f:return Object(d.a)(Object(d.a)({},e),{},{current:t.payload})}},K=function(e){var t=Object(r.useReducer)(D,{popular:[],current:null,userResources:[],selected:[],setResMsg:{show:!1,msg:""}}),c=Object(o.a)(t,2),n=c[0],a=c[1],s=function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("https://res0urc.herokuapp.com/api/v1/resources?public=true&page=1&limit=4&sort=popular");case 3:t=e.sent,a({type:O,payload:t.data.data.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),i=function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("https://res0urc.herokuapp.com/api/v1/resources/my");case 3:t=e.sent,a({type:m,payload:t.data.data.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(u.a)(l.a.mark((function e(t){var c,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("https://res0urc.herokuapp.com/api/v1/resources/".concat(t));case 3:c=e.sent,r=c.data.data.data,a({type:f,payload:r}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.response.data);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(w.jsx)(M.Provider,{value:{popular:n.popular,userResources:n.userResources,current:n.current,selected:n.selected,getPopular:s,getResources:i,getOnePublic:j,openAll:function(){for(var e=n.current.links,t=0;t<e.length;t++)window.open(e[t].url)},openSelected:function(){for(var e=n.selected,t=0;t<e.length;t++)window.open(e[t].url)},clearCurrent:function(){a({type:x})},addSelect:function(e){n.selected.push({id:e.id,url:e.url})},removeSelect:function(e){var t=Object(q.a)(n.selected);t=n.selected.filter((function(t){return t.id!==e})),n.selected=Object(q.a)(t)}},children:e.children})};var V=function(){var e=Object(r.useState)(!0),t=Object(o.a)(e,2),c=t[0],n=t[1];return Object(r.useEffect)((function(){var e=localStorage.getItem("token");n(!!e)}),[c]),Object(w.jsx)(y,{children:Object(w.jsxs)(K,{children:[!c&&Object(w.jsxs)("div",{className:"no-user",children:[Object(w.jsx)("h1",{children:"Log in to start using our extension."}),Object(w.jsx)(R,{})]}),c&&Object(w.jsx)(J,{})]})})},Y=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,49)).then((function(t){var c=t.getCLS,r=t.getFID,n=t.getFCP,a=t.getLCP,s=t.getTTFB;c(e),r(e),n(e),a(e),s(e)}))};s.a.render(Object(w.jsx)(n.a.StrictMode,{children:Object(w.jsx)(V,{})}),document.getElementById("root")),Y()}},[[48,1,2]]]);
//# sourceMappingURL=main.92694f33.chunk.js.map