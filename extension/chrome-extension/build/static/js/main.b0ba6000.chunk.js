(this["webpackJsonpchrome-extension"]=this["webpackJsonpchrome-extension"]||[]).push([[0],{23:function(e,t,r){},24:function(e,t,r){},45:function(e,t,r){"use strict";r.r(t);var a=r(1),c=r.n(a),n=r(18),s=r.n(n),o=(r(23),r(6)),u=(r(24),r(4)),i=r.n(u),l=r(7),j=Object(a.createContext)(),p=r(2),d="GET_USER",b="SET_MSG",h="CLEAR_MSG",O="GET_POPULAR",f="GET_MY_RES",x="SET_CURRENT",m=function(e,t){switch(t.type){case d:return Object(p.a)(Object(p.a)({},e),{},{user:t.payload});case b:return Object(p.a)(Object(p.a)({},e),{},{setMsg:{show:!0,msg:t.payload}});case h:return Object(p.a)(Object(p.a)({},e),{},{setMsg:{show:!1,msg:""}})}},g=r(5),v=r.n(g),k=function(e){e?v.a.defaults.headers.common.Authorization="Bearer ".concat(e):delete v.a.defaults.headers.common.Authorization},y=r(0),w=function(e){var t=Object(a.useReducer)(m,{user:{},setMsg:{show:!1,msg:""}}),r=Object(o.a)(t,2),c=r[0],n=r[1],s=function(e){n({type:b,payload:e}),setTimeout((function(){u()}),5e3)},u=function(){n({type:h})},p=function(){var e=Object(l.a)(i.a.mark((function e(t){var r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r={email:t.email,password:t.password},e.next=4,v.a.post("https://res0urc.herokuapp.com/api/v1/users/login",r);case 4:a=e.sent,c=a.data.token,localStorage.setItem("token",c),window.location.reload(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),s(e.t0.response.data.message);case 12:case"end":return e.stop()}var c}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k(localStorage.token),e.prev=1,e.next=4,v.a.get("https://res0urc.herokuapp.com/api/v1/users/me");case 4:t=e.sent,n({type:d,payload:t.data.data.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();return Object(y.jsx)(j.Provider,{value:{user:c.user,setMsg:c.setMsg,loginUser:p,logout:function(){document.cookie="jwt=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",localStorage.clear(),window.location.reload()},getUser:O,msgHandler:s},children:e.children})},C=r(8),_=function(e){var t=e.label[0].toUpperCase()+e.label.slice(1);return Object(y.jsxs)(a.Fragment,{children:[Object(y.jsx)("label",{htmlFor:e.label,children:t}),Object(y.jsx)("input",Object(p.a)(Object(p.a)({className:"input"},e.input),{},{onChange:e.onChange}))]})},N=function(e){var t=e.text,r=e.stylingClass;return Object(y.jsx)("button",{className:"btn ".concat(r),children:t})},R=function(){var e=Object(a.useContext)(j),t=e.loginUser,r=e.setMsg,c=Object(a.useState)({email:"",password:""}),n=Object(o.a)(c,2),s=n[0],u=n[1],i=function(e){u(Object(p.a)(Object(p.a)({},s),{},Object(C.a)({},e.target.name,e.target.value)))};return Object(y.jsxs)(a.Fragment,{children:[Object(y.jsx)("p",{className:"error__msg",children:r.show?r.msg:""}),Object(y.jsx)("div",{className:"login input__default",children:Object(y.jsxs)("form",{className:"login__form ",onSubmit:function(e){t(s),e.preventDefault()},children:[Object(y.jsx)(_,{label:"email",input:{type:"text",placeholder:"Email",name:"email",required:!0},onChange:i}),Object(y.jsx)(_,{label:"password",input:{type:"password",placeholder:"Password",name:"password",required:!0},onChange:i}),Object(y.jsx)(N,{stylingClass:"button-y-animation",text:"Log in"})]})}),Object(y.jsxs)("h3",{className:"create__account",children:["No account yet? Please start"," ",Object(y.jsx)("a",{href:"https://res0urc.herokuapp.com/#",children:"here"})]})]})},E=function(e){var t=e.login;return Object(y.jsx)(a.Fragment,{children:Object(y.jsx)("h1",{onClick:t,className:"logo",children:"ResourC"})})},S=r.p+"static/media/default.4aff07be.png",T=function(){var e=Object(a.useContext)(j),t=e.user,r=e.getUser,c=e.logout;return Object(a.useEffect)((function(){r()}),[t,r]),Object(y.jsxs)("nav",{className:"nav__bar",children:[Object(y.jsx)(E,{}),Object(y.jsxs)("ul",{className:"userInfo",children:[Object(y.jsx)("li",{children:Object(y.jsx)("img",{src:t.photo||S,alt:"user avatar"})}),Object(y.jsx)("li",{children:t.name}),Object(y.jsx)("li",{className:"logout",onClick:function(){return c()},children:"Logout"})]})]})},M=Object(a.createContext)(),P=r.p+"static/media/defaultCover.1287f47e.png",F=function(e){var t=e.pop,r=t.name,c=t.description,n=t.id,s=t.links,o=t.cover,u=Object(a.useContext)(M).getOnePublic;return Object(y.jsxs)("li",{className:"card",id:n,onClick:function(e){var t=e.target.id||e.target.parentElement.id;u(t)},children:[Object(y.jsx)("img",{className:"card__cover",src:"../assets/defaultCover.png"===o?P:o,alt:"resourc cover"}),Object(y.jsx)("h1",{className:"card__title",children:r}),Object(y.jsx)("p",{className:"card__description",children:c}),Object(y.jsxs)("p",{className:"links-info",children:["Links: ",s.length,"/20"]})]})},U=function(e){var t=e.res;return Object(y.jsx)("ul",{className:"res__grid",children:t.map((function(e){return Object(y.jsx)(F,{pop:e},e.id)}))})},L=function(){var e=Object(a.useContext)(M),t=e.popular,r=e.getPopular;Object(a.useEffect)((function(){r()}),[]);var c=t.sort((function(e,t){return t.addedToBookmark.length-e.addedToBookmark.length}));return Object(y.jsxs)("div",{className:"popular",children:[Object(y.jsx)("h1",{className:"popular__title",children:"Recently popular:"}),Object(y.jsx)(U,{res:c})]})},B=function(){var e=Object(a.useContext)(M),t=e.userResources,r=e.getResources;return Object(a.useEffect)((function(){r()}),[]),Object(y.jsxs)("div",{className:"user__lists",children:[Object(y.jsx)("h1",{children:"My resources:"}),Object(y.jsx)(U,{res:t})]})},G=function(){return Object(y.jsxs)("footer",{className:"footer",children:[Object(y.jsxs)("h4",{children:["Created by ",Object(y.jsx)("a",{href:"https://itutorials.pl/",children:"Tomasz Rusnak"})," 2021"]}),Object(y.jsxs)("h4",{children:["Visist our ",Object(y.jsx)("a",{href:"https://res0urc.herokuapp.com/",children:"Homepage"})]})]})},I=function(){Object(a.useContext)(M).current;return Object(y.jsx)("div",{className:"links"})},A=function(){var e=Object(a.useContext)(M).current;return Object(y.jsxs)("div",{className:"container",children:[Object(y.jsx)(T,{}),Object(y.jsx)("main",{children:e?Object(y.jsx)(I,{}):Object(y.jsxs)(a.Fragment,{children:[Object(y.jsx)(L,{}),Object(y.jsx)(B,{})]})}),Object(y.jsx)(G,{})]})},z=function(e,t){switch(t.type){case O:return Object(p.a)(Object(p.a)({},e),{},{popular:t.payload})}switch(t.type){case f:return Object(p.a)(Object(p.a)({},e),{},{userResources:t.payload})}switch(t.type){case x:return Object(p.a)(Object(p.a)({},e),{},{current:t.payload})}},J=function(e){var t=Object(a.useReducer)(z,{popular:[],current:null,userResources:[],setResMsg:{show:!1,msg:""}}),r=Object(o.a)(t,2),c=r[0],n=r[1],s=function(){var e=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.a.get("https://res0urc.herokuapp.com/api/v1/resources?public=true&page=1&limit=4&sort=popular");case 3:t=e.sent,n({type:O,payload:t.data.data.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),u=function(){var e=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.a.get("https://res0urc.herokuapp.com/api/v1/resources/my");case 3:t=e.sent,n({type:f,payload:t.data.data.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(l.a)(i.a.mark((function e(t){var r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.a.get("https://res0urc.herokuapp.com/api/v1/resources/".concat(t));case 3:r=e.sent,a=r.data.data.data,n({type:x,payload:a}),console.log(c.current),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0.response.data);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(y.jsx)(M.Provider,{value:{popular:c.popular,userResources:c.userResources,current:c.current,getPopular:s,getResources:u,getOnePublic:j},children:e.children})};var q=function(){var e=Object(a.useState)(!0),t=Object(o.a)(e,2),r=t[0],c=t[1];return Object(a.useEffect)((function(){var e=localStorage.getItem("token");c(!!e)}),[r]),Object(y.jsx)(w,{children:Object(y.jsxs)(J,{children:[!r&&Object(y.jsxs)("div",{className:"no-user",children:[Object(y.jsx)("h1",{children:"Log in to start using our extension."}),Object(y.jsx)(R,{})]}),r&&Object(y.jsx)(A,{})]})})},D=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,46)).then((function(t){var r=t.getCLS,a=t.getFID,c=t.getFCP,n=t.getLCP,s=t.getTTFB;r(e),a(e),c(e),n(e),s(e)}))};s.a.render(Object(y.jsx)(c.a.StrictMode,{children:Object(y.jsx)(q,{})}),document.getElementById("root")),D()}},[[45,1,2]]]);
//# sourceMappingURL=main.b0ba6000.chunk.js.map